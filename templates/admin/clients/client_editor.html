{% extends "layouts/page.html" %}

{% block content %}

    <section id="main-content">
        <div class="card shadow-lg border-info">
            <div class="card-header shadow-sm bg-facebook border-info">
                <h2 class="card-title font-weight-bold text-white">
                    <i class="fa fa-users"> </i>
                    Policy Holder Admin
                </h2>
            </div>
            <div class="card-body">
                <!-- Tab navigation -->
                <ul class="nav nav-tabs" id="myTab" role="tablist">

                    <li class="nav-item">
                        <a class="nav-link active" id="viewer-tab" data-toggle="tab" href="#viewer" role="tab" aria-controls="viewer" aria-selected="false">
                            <span class="font-weight-bold text-info">
                                <i class="fa fa-file-text"> </i>
                                Policy Details
                            </span>
                        </a>
                    </li>


                    <li class="nav-item">
                        <a class="nav-link" id="editor-tab" data-toggle="tab" href="#editor" role="tab" aria-controls="editor" aria-selected="false">
                            <span class="font-weight-bold text-info">
                                <i class="fa fa-file-text"> </i>
                                Client Editor
                            </span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="cover-tab" data-toggle="tab" href="#cover" role="tab" aria-controls="cover" aria-selected="false">
                            <span class="font-weight-bold text-info">
                                <i class="fa fa-credit-card"> </i>
                                Policy Editor
                            </span>
                        </a>
                    </li>

{#                    <li class="nav-item">#}
{#                        <a class="nav-link" id="premiums-tab" data-toggle="tab" href="#premiums" role="tab" aria-controls="premiums" aria-selected="false">#}
{#                            <span class="font-weight-bold text-info">#}
{#                                <i class="fa fa-credit-card"> </i>#}
{#                                Upcoming Premiums#}
{#                            </span>#}
{#                        </a>#}
{#                    </li>#}


                </ul>

                <!-- Tab content -->
                <div class="tab-content" id="myTabContent">
                    <!-- Client capture tab -->
                    <div class="tab-pane fade show active" id="viewer" role="tabpanel" aria-labelledby="viewer-tab">
                        <div class="card shadow-lg border-info">
                            <div class="card-header bg-facebook shadow-lg border-info m-b-12">
                                <h3 class="card-title text-white">
                                    <i class="fa fa-user-md"> </i>
                                    Funeral Policy of : <span class="text-white">{{ policy_holder.full_names| title }} {{ policy_holder.surname| title }}</span>
                                </h3>
                            </div>
                            <div class="card-body">
                                <ul class="list-group">
                                    <li class="list-group-item font-weight-light">Title: <span class="text-info pull-right">{{ policy_holder.title }}</span></li>
                                    <li class="list-group-item font-weight-light">ID Number: <span class="text-info pull-right">{{ policy_holder.id_number }}</span></li>
                                    <li class="list-group-item font-weight-light">Date of Birth: <span class="text-info  pull-right">{{ policy_holder.date_of_birth }}</span></li>
                                    <li class="list-group-item font-weight-light">Nationality: <span class="text-info  pull-right">{{ policy_holder.nationality }}</span></li>
                                    <li class="list-group-item font-weight-light">Is Policy Holder: <span class="text-info  pull-right">{{ "Yes" if policy_holder.is_policy_holder else "No" }}</span></li>
                                    <li class="list-group-item font-weight-light">Plan Number: <span class="text-info  pull-right">{{ policy_holder.plan_number }}</span></li>
                                    <li class="list-group-item font-weight-light">Policy Number: <span class="text-info  pull-right">{{ policy_holder.policy_number }}</span></li>
                                </ul>
                            </div>
                        </div>
                        <div class="card shadow-lg border-info">

                            <div class="card-header shadow-lg bg-facebook">
                                <h3 class="card-title text-white">
                                    <i class="fa fa-file"> </i>
                                    Policy Details
                                </h3>
                            </div>


                            <div class="card-body">
                                <ul class="list-group">
                                    <li class="list-group-item font-weight-light">Policy Number: <span class="text-info pull-right">{{ policy_data.policy_number }}</span></li>
                                    <li class="list-group-item font-weight-light">Plan Number: <span class="text-info pull-right">{{ policy_data.plan_number }}</span></li>
                                    <li class="list-group-item font-weight-light">Policy Type: <span class="text-info pull-right">{{ policy_data.policy_type }}</span></li>
                                    <li class="list-group-item font-weight-light">Total Family Members: <span class="text-info pull-right">{{ policy_data.total_family_members }}</span></li>

                                    <li class="list-group-item font-weight-light">Payment Code Reference: <span class="text-info pull-right">{{ policy_data.payment_code_reference }}</span></li>
                                    {% if  policy_data.date_activated %}
                                        <li class="list-group-item font-weight-light">Date Activated: <span class="text-info pull-right">{{ policy_data.date_activated }}</span></li>
                                    {% endif %}
                                    {% if  policy_data.first_premium_date %}
                                        <li class="list-group-item font-weight-light">First Premium Date: <span class="text-info pull-right">{{ policy_data.first_premium_date }}</span></li>
                                    {% endif %}
                                    {% if  policy_data.payment_day %}
                                        <li class="list-group-item font-weight-light">Payment Day: <span class="text-info pull-right">{{ policy_data.payment_day }}</span></li>
                                    {% endif %}
                                    {% if policy_data.client_signature %}
                                        <li class="list-group-item font-weight-light">Client Signature: <span class="text-info pull-right">{{ policy_data.client_signature }}</span></li>
                                    {% endif %}
                                    {% if  policy_data.employee_signature %}
                                        <li class="list-group-item font-weight-light">Employee Signature: <span class="text-info pull-right">{{ policy_data.employee_signature }}</span></li>
                                    {% endif %}
                                    {% if  policy_data.payment_method %}
                                        <li class="list-group-item font-weight-light">Payment Method: <span class="text-info pull-right">{{ policy_data.payment_method }}</span></li>
                                    {% endif %}

                                    <li class="list-group-item font-weight-light">Policy Active: <span class="text-info pull-right">{{ "Yes" if policy_data.policy_active else "No" }}</span></li>
                                    <li class="list-group-item font-weight-light">Monthly Premiums: <span class="text-info pull-right">R {{ policy_data.total_premiums| number }}.00</span></li>
                                </ul>
                            </div>
                        </div>
                        <div class="card shadow-lg border-info">
                            <div class="card-header shadow-sm border-info bg-facebook m-b-12">
                                <h3 class="card-title font-weight-bold text-white">
                                    <i class="fa fa-user-plus"> </i>
                                    Beneficiaries &amp; Dependents
                                </h3>
                            </div>
                            <div class="card-body">
                            <table class="table table-bordered table-striped">

                                    <thead class="font-weight-light text-info">
                                        <tr>
                                            <td>Full Names</td>
                                            <td>Surname</td>
                                            <td>ID #</td>
                                            <td>Plan #</td>
                                            <td>Insured Party</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for policy_holder in beneficiaries %}
                                            <tr>
                                                <td class="font-weight-light text-info">
                                                        {{ policy_holder.title }} {{ policy_holder.full_names }}
                                                </td>
                                                <td>{{ policy_holder.surname }}</td>
                                                <td>{{ policy_holder.id_number }}</td>
                                                <td>{{ policy_holder.plan_number or "N/A" }}</td>
                                                <td>{{ policy_holder.insured_party }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                            </table>

                            </div>
                            <div class="card-footer">
                                <a href="#" class="btn btn-sm btn-outline-primary btn-rounded mr-2 mr-md-12 mb-2 mb-md-0 pull-right" data-toggle="modal" data-target="#addFamilyID">
                                    Add Beneficiary or Dependents
                                </a>
                            </div>
                        </div>

                    </div>
                    <div class="tab-pane fade" id="editor" role="tabpanel" aria-labelledby="editor-tab">
                        <div class="card-body">
                            <!-- Client capture form -->
                            <div class="card-header">
                                <h3 class="font-weight-bold card-title">
                                    <i class="fa fa-file-text"> </i>
                                    Client Editor
                                </h3>
                            </div>
                            <div class="card-body m-t-10">
                                {% include 'admin/clients/forms/client_capture.html' %}
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="cover" role="tabpanel" aria-labelledby="cover-tab">
                        <div class="card-body">
                            <!-- Content for upcoming premiums tab goes here -->
                            <div class="card-header">
                                <h3 class="font-weight-bold card-title">
                                    <i class="fa fa-credit-card"> </i>
                                    Policy Editor
                                </h3>
                            </div>
                            <div class="card-body m-t-10">
                                {% include 'admin/clients/forms/policy_editor.html' %}
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

{% endblock %}


{% include 'admin/clients/forms/add_family.html' %}
