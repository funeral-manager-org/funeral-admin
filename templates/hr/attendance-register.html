
{% extends "layouts/page.html" %}

{% block content %}

<section id="main-content">
    <div class="card shadow-lg border-success">
        <div class="card-header bg-facebook">
            <h2 class="card-title font-weight-bold text-white">
                <i class="fa fa-registered"> </i>
              Attendance Register
            </h2>
        </div>
        <div class="card-body">

        <table class="table table-striped">
          <thead>
                <tr>
                  <th>Date</th>
                  <th>Time In</th>
                  <th>Time Out</th>
                  <th>Status</th>
                  <th>Notes</th>
                </tr>
          </thead>
          <tbody>
                {% if employee_detail and employee_detail.summary and employee_detail.summary.records %}
                    {% for record in employee_detail.summary.records %}
                        <tr>
                            <td>{{ record.day_and_date_clocked_in() }}</td>
                            <td>{{ record.clock_in }}</td>
                            <td>{{ record.clock_out }}</td>
                            <td>{{ 'Present' if record.clock_out else 'Absent' }}</td>
                            <td>{{ record.note }}</td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5">No records available</td>
                    </tr>
                {% endif %}
          </tbody>
        </table>
        <div class="pagination">
          <!-- Pagination controls here -->
        </div>

        </div>

      <div class="card-footer">
        <div class="row">

            <form class="form-horizontal" method="POST" action="{{ url_for('employees.employee_clocking_in') }}">
                    {% if employee_detail %}
                        <input type="hidden" id="employee_id" name="employee_id" value="{{ employee_detail.employee_id }}">
                    {% endif %}

                    {% if employee_detail and employee_detail.summary  and employee_detail.summary.has_clocked_in_today %}
                        <button id="clocked_in" class="btn btn-lg btn-block btn-rounded btn-success btn-outline-success m-r-12" disabled>
                              <i class="fa fa-clock-o"></i>
                              Clocked In
                        </button>
                    {% else %}
                        <button id="clocked_in" class="btn btn-lg btn-block btn-rounded btn-outline-success m-r-12">
                              <i class="fa fa-clock-o"></i>
                              Clocked In
                        </button>
                    {% endif %}

            </form>

            <form class="form-horizontal" method="POST" action="{{ url_for('employees.employee_clocking_out') }}">
                    {% if employee_detail %}
                        <input type="hidden" id="employee_id" name="employee_id" value="{{ employee_detail.employee_id }}">
                    {% endif %}
                <button id="clocked_out" class="btn btn-lg btn-block btn-rounded btn-outline-danger">
                  <i class="fa fa-clock-o"></i>
                  Clocked Out
                </button>
            </form>

        </div>
      </div>

    </div>
</section>
{% endblock %}
